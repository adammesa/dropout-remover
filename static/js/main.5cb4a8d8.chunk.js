(this["webpackJsonpdropout-remover"]=this["webpackJsonpdropout-remover"]||[]).push([[0],{239:function(e,t,a){e.exports=a(381)},244:function(e,t,a){},245:function(e,t,a){},381:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),l=a(187),i=a.n(l),r=(a(244),a(9)),o=a(8),c=a(12),u=a(11),h=a(16),m=a(13),d=(a(245),a(410)),p=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).toggleClass=a.toggleClass.bind(Object(h.a)(a)),a.state={active:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"toggleClass",value:function(){var e=this.state.active;this.setState({active:!e})}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("div",{style:{textAlign:"left"},className:this.state.active?"dropdown is-active":"dropdown"},n.a.createElement("div",{className:"dropdown-trigger"},n.a.createElement("button",{className:"button is-text","aria-haspopup":"true",onClick:this.toggleClass},n.a.createElement("span",null,"Instructions"))),n.a.createElement("div",{className:"dropdown-menu",id:"dropdown-instructions",role:"menu"},n.a.createElement("div",{className:"dropdown-content"},n.a.createElement("div",{className:"dropdown-item"},n.a.createElement("p",null,n.a.createElement("button",{className:"delete",onClick:this.toggleClass,style:{float:"right"}},"Hide"),'Upload a ".csv" file with any number of columns. Specify which column to analyze. Data in that column that is an outlier relative to its peers will be deleted (along with all numbers in that row).')),n.a.createElement("hr",{className:"dropdown-divider"}),n.a.createElement("div",{className:"dropdown-item"},n.a.createElement("b",null,"Standard Deviation Mode "),n.a.createElement("label",{className:"tag"},"suggested"),n.a.createElement("p",null,"Compares the current data point to the specified amount of values ahead/behind (exclusive of this current point). If the point is more than the specified cutoff value different from the unbiased standard deviation, the row will be removed.")),n.a.createElement("div",{className:"dropdown-item"},n.a.createElement("b",null,"Absolute Mode "),n.a.createElement("p",null,'Compares the current data point to the mean of the of values ahead/behind, if it is a static difference away, will be deleted."')),n.a.createElement("hr",{className:"dropdown-divider"}),n.a.createElement("div",{className:"dropdown-item"},n.a.createElement("p",null,"The program also lets you choose if dropouts can be lower (negative) compared to the average of the compared period, or higher, or both. This is useful if your sensor when reporting erroneous values, does so in one consistent direction."),n.a.createElement("p",null,n.a.createElement("b",null,"First/Last values"),': If the program is unable to "look" the specified amount of cells behind or ahead of the current value, it will attempt to do so with the values that do exist within the current look range. (It will not attempt to look further "ahead" if there are not enough values "behind", however)'))))))}}]),t}(n.a.Component),b=a(188),f=a.n(b),g=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).toggleClass=a.toggleClass.bind(Object(h.a)(a)),a.state={active:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"toggleClass",value:function(){var e=this.state.active;this.setState({active:!e})}},{key:"render",value:function(){return 0!==this.props.csvData.length&&this.props.csvData?n.a.createElement("div",null,n.a.createElement("div",{className:this.state.active?"dropdown is-active is-pulled-right":"dropdown is-pulled-right"},n.a.createElement("div",{className:"dropdown-trigger"},n.a.createElement("button",{className:"button is-small is-text","aria-haspopup":"true",onClick:this.toggleClass},n.a.createElement("span",null,"Preview"))),n.a.createElement("div",{className:"dropdown-menu",id:"dropdown-instructions",role:"menu"},n.a.createElement("div",{className:"dropdown-content"},n.a.createElement("div",{className:"dropdown-item"},n.a.createElement("button",{className:"delete",onClick:this.toggleClass,style:{float:"right"}},"Hide"),n.a.createElement("table",{className:"table is-striped is-narrow is-bordered"},n.a.createElement("tbody",null,this.props.csvData.slice(0,6).map((function(e,t){return n.a.createElement("tr",{key:e+t},e.map((function(e,t){return n.a.createElement("td",{key:t},e)})))}))))))))):n.a.createElement("div",null)}}]),t}(n.a.Component),v=function(){function e(){Object(r.a)(this,e)}return Object(o.a)(e,null,[{key:"cleanData",value:function(e,t,a,s,n,l,i,r){for(var o=[],c=[],u=0;u<i;u++)o.push(e[u]);for(var h=i;h<e.length;h++)if(this._isOutlier(h,e,t,a,s,n,l,i,r)){for(var m=[],d=0;d<e[h].length;d++)isNaN(parseInt(e[h][d]))?m.push(e[h][d]):m.push(null);o.push(m),c.push(h)}else o.push(e[h]);return{cleanedCsvData:o,delRowNums:c}}},{key:"_isOutlier",value:function(e,t,a,s,n,l,i,r,o){var c,u=[],h=e-i,m=e+i,p=!1;h<r?h=r:m>t.length-1&&(m=t.length-1);for(var b=h;b<m;b++)b===e?c=t[b][o]:u.push(t[b][o]);var f=c-Object(d.a)(u);if(f<0&&n)p=a?f<-Object(d.b)(u)*s:f<-s;else if(f>0&&l){if(a)p=f>Object(d.b)(u)*s;else p=f>s}return p}},{key:"toGraphData",value:function(t,a,s,n,l){for(var i=t[0].length,r=[],o=[],c=["#b3e2cd","#fdcdac","#f4cae4","#fff2ae","#f1e2cc"],u=0,h=0;h<i;h++){for(var m=[],d=1,p=s;p<t.length;p++)isNaN(parseInt(t[p][h]))||(m.push({x:d,y:parseFloat(t[p][h])}),d>u&&(u=d)),d++;var b=void 0;n===h?(b={id:this._getColName(t,h,s),data:m},o.push("hsl(204, 100%, 85%")):(b={id:this._getColName(t,h,s),data:m},o.push(c[h%c.length])),r.push(b)}if(a.length>0){var f=e.getCleanedDataPoints(s,a,l,n);r.push({id:this._getColName(a,n,s)+" dropped",data:f}),o.push("hsl(204, 100%, 50%)")}var g=Math.round(u/10);return{data:r,axisBottomTickValues:[1,g,2*g,3*g,4*g,5*g,6*g,7*g,8*g,9*g,u],colors:o}}},{key:"getCleanedDataPoints",value:function(e,t,a,s){for(var n=[],l=1,i=e;i<t.length;i++)a.includes(i)?n.push({x:l,y:null}):isNaN(parseInt(t[i][s]))||n.push({x:l,y:t[i][s]}),l++;return n}},{key:"removeTrailingEmpties",value:function(e){var t=e.length,a=!1;function s(e){isNaN(parseInt(e))||(a=!0)}for(var n=0;n<t;n++)if(!a){var l=e.pop();l.forEach((function(e){return s(e)})),a&&(e.push(l),n+=e.length)}return e}},{key:"_getColName",value:function(e,t,a){for(var s="",n=0;n<a;n++)s=s+e[n][t]+" ";return s}}]),e}(),E=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).beginCallback=a.beginCallback.bind(Object(h.a)(a)),a.state={innerCSVData:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"beginCallback",value:function(e){var t=v.removeTrailingEmpties(e);this.setState({innerCSVData:t}),this.props.callback(t)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("div",{className:"pad-item-bottom"},n.a.createElement("div",{className:"columns"},n.a.createElement("div",{className:"column"},n.a.createElement(f.a,{cssClass:"control",onFileLoaded:function(t){return e.beginCallback(t)}})),n.a.createElement("div",{className:"column"},n.a.createElement(g,{csvData:this.state.innerCSVData})))))}}]),t}(n.a.Component),k=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).beginCallback=a.beginCallback.bind(Object(h.a)(a)),a.state={SDmode:!0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"beginCallback",value:function(e){"SDmode"===e.target.value?(this.setState({SDmode:!0}),this.props.callback(!0)):(this.setState({SDmode:!1}),this.props.callback(!1))}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("div",{className:"field pad-item-bottom"},n.a.createElement("label",null,"Filtering mode:"),n.a.createElement("div",{className:"control"},n.a.createElement("label",{className:"radio"},n.a.createElement("input",{type:"radio",value:"SDmode",style:{marginRight:"5px"},checked:this.state.SDmode,onChange:this.beginCallback}),"Standard Deviation"),n.a.createElement("label",{className:"radio"},n.a.createElement("input",{type:"radio",value:"absolute",style:{marginRight:"5px",marginLeft:"25px"},checked:!this.state.SDmode,onChange:this.beginCallback}),"\xa0Absolute"))))}}]),t}(n.a.Component),C=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"field"},n.a.createElement("label",null,"Cutoff ",this.props.mode?"deviation":"difference",":"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"number",onChange:this.props.callback,min:"0",step:this.props.mode?"0.1":"2",value:this.props.default,placeholder:"(A S.D. cutoff of 1.5 is recommended)"})))}}]),t}(n.a.Component),w=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"field"},n.a.createElement("label",null,"Compare ",this.props.default," ahead & behind"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"number",onChange:this.props.callback,min:"1",step:"1",value:this.props.default,placeholder:"(Integers only)"})))}}]),t}(n.a.Component),y=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"tag is-white"},"Header rows"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input is-small",type:"number",onChange:this.props.callback,min:"0",step:"1",value:this.props.default,placeholder:"(Integers only)"})))}}]),t}(n.a.Component),N=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"tag is-white"},"Column to analyze"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input is-small",type:"number",onChange:this.props.callback,min:"1",max:this.props.maxColumns,step:"1",value:this.props.default+1,placeholder:"(Integers only)"})))}}]),t}(n.a.Component),O=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={filterLower:a.props.lowerDefault,filterHigher:a.props.higherDefault},a.beginHigherCallback=a.beginHigherCallback.bind(Object(h.a)(a)),a.beginLowerCallback=a.beginLowerCallback.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"beginHigherCallback",value:function(e){var t=!this.state.filterHigher;this.setState({filterHigher:t}),this.props.callback(t,"higher")}},{key:"beginLowerCallback",value:function(e){var t=!this.state.filterLower;this.setState({filterLower:t}),this.props.callback(t,"lower")}},{key:"render",value:function(){return n.a.createElement("div",{className:"field"},n.a.createElement("label",null,"Dropouts are:"),n.a.createElement("label",{style:{marginLeft:"10px"},className:"checkbox"},n.a.createElement("input",{checked:this.state.filterLower,onChange:this.beginLowerCallback,type:"checkbox"}),"\xa0 Lower"),n.a.createElement("label",{style:{marginLeft:"10px"},className:"checkbox"},n.a.createElement("input",{checked:this.state.filterHigher,onChange:this.beginHigherCallback,type:"checkbox"}),"\xa0 Higher"))}}]),t}(n.a.Component),j=a(135),D=a(190),S=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=v.toGraphData(this.props.csvData,this.props.cleanedCsvData,this.props.ignoredRows,this.props.analysisColumn,this.props.delRowNums);return n.a.createElement("div",{style:{maxWidth:"700px",height:"630px",overflow:"auto"}},n.a.createElement("div",{style:{height:"600px",width:this.props.graphWidth}},n.a.createElement(D.a,{data:e.data,enableGridX:!1,margin:{left:60,bottom:50,right:50,top:50},axisLeft:{orient:"left",legend:"Value",legendPosition:"middle",legendOffset:-40},colors:Object(j.a)(e.colors),axisBottom:{orient:"bottom",legend:"Reading #",legendPosition:"start",legendOffset:40,tickValues:Object(j.a)(e.axisBottomTickValues)},legends:[{anchor:"bottom-left",direction:"row",translateX:100,translateY:50,itemWidth:80*this.props.ignoredRows,itemHeight:20}]})))}}]),t}(n.a.Component),x=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.csvData.length>0&&this.props.isProcessing?n.a.createElement("div",{style:{height:"100%"}},n.a.createElement(S,{csvData:this.props.csvData,cleanedCsvData:this.props.cleanedCsvData,ignoredRows:this.props.ignoredRows,analysisColumn:this.props.analysisColumn,delRowNums:this.props.delRowNums,graphWidth:this.props.graphWidth})):n.a.createElement("div",null)}}]),t}(n.a.Component),R=a(202),L=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){if(this.props.isProcessing){var e=this.props.delRowNums.length;return n.a.createElement("div",{className:"box dropout-stats has-background-link has-text-white"},n.a.createElement("div",{className:"columns"},n.a.createElement("div",{className:"column"},n.a.createElement("p",{className:"is-size-4"},this.props.csvData.length),n.a.createElement("p",{className:"is-size-7"},"Total Rows")),n.a.createElement("div",{className:"column"},n.a.createElement("p",{className:"is-size-4"},e),n.a.createElement("p",{className:"is-size-7"},"Rows Dropped")),n.a.createElement("div",{className:"column"},n.a.createElement("button",{className:"button is-light is-pulled-right"},n.a.createElement(R.CSVLink,{data:this.props.cleanedCsvData},"Download")))))}return n.a.createElement("div",null)}}]),t}(n.a.Component),P=a(68),H=a.n(P),I=a(69),z=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.props.isProcessing?n.a.createElement("div",{className:"is-pulled-right"},n.a.createElement("button",{className:"button is-white",disabled:this.props.graphWidth<701,onClick:function(){return e.props.callback("-")}},n.a.createElement(H.a,{path:I.b,size:1})),"\xa0",n.a.createElement("button",{className:"button is-white",onClick:function(){return e.props.callback("+")}},n.a.createElement(H.a,{path:I.c,size:1})),"\xa0"):n.a.createElement("div",null)}}]),t}(s.Component),A=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return""===this.props.errorMsg?n.a.createElement("div",null):n.a.createElement("div",{className:"tag is-warning is-light"},n.a.createElement(H.a,{path:I.a,size:.5,color:"#947600"}),"\xa0",this.props.errorMsg)}}]),t}(s.Component),W=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={csvData:[],cleanedCsvData:[],SDmode:!0,filterCutoff:1.5,filterLower:!0,filterHigher:!1,lookDistance:5,ignoredRows:1,analysisColumn:0,isProcessing:!1,delRowNums:[],graphWidth:700,errorMsg:""},a.toggleProcessingData=a.toggleProcessingData.bind(Object(h.a)(a)),a.changeGraphSize=a.changeGraphSize.bind(Object(h.a)(a)),a.loadNegativeOnly=a.loadNegativeOnly.bind(Object(h.a)(a)),a.loadNewData=a.loadNewData.bind(Object(h.a)(a)),a.loadSDmode=a.loadSDmode.bind(Object(h.a)(a)),a.loadFilterCutoff=a.loadFilterCutoff.bind(Object(h.a)(a)),a.loadLookDistance=a.loadLookDistance.bind(Object(h.a)(a)),a.loadIgnoredRows=a.loadIgnoredRows.bind(Object(h.a)(a)),a.loadAnalysisColumn=a.loadAnalysisColumn.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"toggleProcessingData",value:function(){this.setState({isProcessing:!this.state.isProcessing})}},{key:"componentDidUpdate",value:function(e,t,a){if(this.state.isProcessing){if(t.csvData!==this.state.csvData||t.isProcessing!==this.state.isProcessing||t.SDmode!==this.state.SDmode||t.lookDistance!==this.state.lookDistance||t.analysisColumn!==this.state.analysisColumn||t.ignoredRows!==this.state.ignoredRows||t.filterCutoff!==this.state.filterCutoff||t.filterLower!==this.state.filterLower||t.filterHigher!==this.state.filterHigher){var s=v.cleanData(this.state.csvData,this.state.SDmode,this.state.filterCutoff,this.state.filterLower,this.state.filterHigher,parseInt(this.state.lookDistance),this.state.ignoredRows,this.state.analysisColumn);this.setState({cleanedCsvData:s.cleanedCsvData,delRowNums:s.delRowNums})}}else if((t.csvData!==this.state.csvData||t.analysisColumn!==this.state.analysisColumn||t.ignoredRows!==this.state.ignoredRows)&&this.state.csvData.length>0&&""!==this.state.ignoredRows&&-1!==this.state.analysisColumn){for(var n=[],l=this.state.ignoredRows;l<this.state.csvData.length;l++)n.push(this.state.csvData[l][this.state.analysisColumn]);try{Object(d.a)(n),this.setState({errorMsg:""})}catch(i){this.setState({errorMsg:"Only numbers can be analyzed"})}}}},{key:"changeGraphSize",value:function(e){var t;t="+"===e?this.state.graphWidth+200:this.state.graphWidth-200,this.setState({graphWidth:t})}},{key:"loadNegativeOnly",value:function(e,t){"lower"===t?this.setState({filterLower:e}):this.setState({filterHigher:e})}},{key:"loadAnalysisColumn",value:function(e){this.setState({analysisColumn:e.target.value-1})}},{key:"loadIgnoredRows",value:function(e){this.setState({ignoredRows:e.target.value})}},{key:"loadNewData",value:function(e){this.setState({csvData:e})}},{key:"loadSDmode",value:function(e){this.setState({SDmode:e})}},{key:"loadFilterCutoff",value:function(e){this.setState({filterCutoff:parseFloat(e.target.value)})}},{key:"loadLookDistance",value:function(e){this.setState({lookDistance:parseInt(e.target.value)})}},{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header container"},n.a.createElement("p",null,"Made by Adam Mesa for Krassioukov Lab (Autonomic Research Unit, ICORD, UBC)")),n.a.createElement("div",{className:"container",style:{paddingLeft:"25px"}},n.a.createElement("div",{className:"columns"},n.a.createElement("div",{className:"column is-two-fifths"},n.a.createElement("div",{className:this.state.isProcessing?"box dropout-controls isProcessing is-clearfix":"box dropout-controls is-clearfix"},n.a.createElement("div",{className:"columns"},n.a.createElement("div",{className:"column"},n.a.createElement("h2",{style:{marginTop:"5px"},className:"title is-4"},"Dropout remover")),n.a.createElement("div",{className:"column is-two-fifths",style:{textAlign:"right"}},n.a.createElement(p,null))),n.a.createElement("p",null,"Load .csv file:"),n.a.createElement(E,{callback:this.loadNewData}),n.a.createElement("div",{className:"columns"},n.a.createElement("div",{className:"column"},n.a.createElement(y,{callback:this.loadIgnoredRows,default:this.state.ignoredRows})),n.a.createElement("div",{className:"column"},n.a.createElement(N,{callback:this.loadAnalysisColumn,maxColumns:0===this.state.csvData.length?"1":this.state.csvData[0].length,default:this.state.analysisColumn}))),n.a.createElement("label",{className:"label"},"Filter Settings"),n.a.createElement(k,{callback:this.loadSDmode}),n.a.createElement("div",{className:"columns"},n.a.createElement("div",{className:"column is-two-fifths"},n.a.createElement(C,{callback:this.loadFilterCutoff,default:this.state.filterCutoff,mode:this.state.SDmode})),n.a.createElement("div",{className:"column"},n.a.createElement(w,{callback:this.loadLookDistance,default:this.state.lookDistance}))),n.a.createElement("div",{className:"columns"},n.a.createElement("div",{className:"column"},n.a.createElement(O,{callback:this.loadNegativeOnly,lowerDefault:this.state.filterLower,higherDefault:this.state.filterHigher}))),n.a.createElement(A,{errorMsg:this.state.errorMsg}),n.a.createElement("button",{className:"button is-link is-light is-pulled-right",disabled:0===this.state.csvData.length||""!==this.state.errorMsg,onClick:this.toggleProcessingData},this.state.isProcessing?"Auto-processing":"Process"),n.a.createElement(z,{graphWidth:this.state.graphWidth,callback:this.changeGraphSize,isProcessing:this.state.isProcessing})),n.a.createElement(L,this.state)),n.a.createElement("div",{className:"column"},n.a.createElement(x,this.state)))))}}]),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[239,1,2]]]);
//# sourceMappingURL=main.5cb4a8d8.chunk.js.map