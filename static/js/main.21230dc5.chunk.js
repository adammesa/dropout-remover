(this["webpackJsonpdropout-remover"]=this["webpackJsonpdropout-remover"]||[]).push([[0],{241:function(e,t,a){e.exports=a(383)},246:function(e,t,a){},247:function(e,t,a){},383:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),l=a(189),o=a.n(l),r=(a(246),a(9)),i=a(7),c=a(12),u=a(11),d=a(10),m=(a(247),a(412)),h=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleClass=n.toggleClass.bind(Object(c.a)(n)),n.state={active:!1},n}return Object(i.a)(a,[{key:"toggleClass",value:function(){var e=this.state.active;this.setState({active:!e})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{style:{textAlign:"left"},className:this.state.active?"dropdown is-active":"dropdown"},s.a.createElement("div",{className:"dropdown-trigger"},s.a.createElement("button",{className:"button is-text","aria-haspopup":"true",onClick:this.toggleClass},s.a.createElement("span",null,"Instructions"))),s.a.createElement("div",{className:"dropdown-menu",id:"dropdown-instructions",role:"menu"},s.a.createElement("div",{className:"dropdown-content"},s.a.createElement("div",{className:"dropdown-item"},s.a.createElement("p",null,s.a.createElement("button",{className:"delete",onClick:this.toggleClass,style:{float:"right"}},"Hide"),'Upload a ".csv" file with any number of columns. Specify which column to analyze. Data in that column that is an outlier relative to its peers will be marked as an outlier. All outlier rows will have the values under "columns to modify" either deleted or interpolated based on your settings. ',s.a.createElement("br",null),s.a.createElement("b",null,"Note:")," The preview graph currently only supports showing the modified values of your column of analysis: if you choose not to modify the column of analysis, you won't see any of your changes in the preview.")),s.a.createElement("hr",{className:"dropdown-divider"}),s.a.createElement("div",{className:"dropdown-item"},s.a.createElement("b",null,"Standard Deviation Mode "),s.a.createElement("label",{className:"tag"},"default"),s.a.createElement("p",null,"Compares the current data point to the specified amount of values ahead/behind (exclusive of this current point). If the difference is more than the specified cutoff value from the standard deviation (of the mean), the point is flagged as dropout.")),s.a.createElement("div",{className:"dropdown-item"},s.a.createElement("b",null,"Absolute Mode "),s.a.createElement("p",null,'Compares the current data point to the mean of the of values ahead/behind, if it is a static difference away from the mean, it will be modified."')),s.a.createElement("div",{className:"dropdown-item"},s.a.createElement("p",null,s.a.createElement("b",null,"Interpolation"),' looks at the surrounding lookDistance-away values of the analysis column, and calculates the mean of these values, ignoring any that would be considered a dropout themselves. A new, "unbiased" mean is calculated which is taken as the interpolated value. For modifying columns that are not the analysis column, it calculates the mean of values from that column, but references the analysis column for guidance on which rows are dropouts and should be ignored from calculations of the mean.')),s.a.createElement("hr",{className:"dropdown-divider"}),s.a.createElement("div",{className:"dropdown-item"},s.a.createElement("p",null,"The program also lets you choose if dropouts can be lower (negative) compared to the average of the compared period, or higher, or both. This is useful if your sensor reports erroneous values in one consistent direction."),s.a.createElement("p",null,s.a.createElement("i",null,"First/Last values"),': If the program is unable to "look" the specified amount of cells behind or ahead of the current value, it will attempt to do so with the values that do exist within the current look range. (It will not attempt to look further "ahead" if there are not enough values "behind", however)'))))))}}]),a}(s.a.Component),p=a(190),v=a.n(p),f=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleClass=n.toggleClass.bind(Object(c.a)(n)),n.state={active:!1},n}return Object(i.a)(a,[{key:"toggleClass",value:function(){var e=this.state.active;this.setState({active:!e})}},{key:"render",value:function(){return 0!==this.props.csvData.length&&this.props.csvData?s.a.createElement("div",null,s.a.createElement("div",{className:this.state.active?"dropdown is-active is-pulled-right":"dropdown is-pulled-right"},s.a.createElement("div",{className:"dropdown-trigger"},s.a.createElement("button",{className:"button is-small is-text","aria-haspopup":"true",onClick:this.toggleClass},s.a.createElement("span",null,"Snippet"))),s.a.createElement("div",{className:"dropdown-menu",id:"dropdown-instructions",role:"menu"},s.a.createElement("div",{className:"dropdown-content"},s.a.createElement("div",{className:"dropdown-item"},s.a.createElement("button",{className:"delete",onClick:this.toggleClass,style:{float:"right"}},"Hide"),s.a.createElement("table",{className:"table is-striped is-narrow is-bordered"},s.a.createElement("tbody",null,this.props.csvData.slice(0,6).map((function(e,t){return s.a.createElement("tr",{key:e+t},e.map((function(e,t){return s.a.createElement("td",{key:t},e)})))}))))))))):s.a.createElement("div",null)}}]),a}(s.a.Component),g=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,null,[{key:"cleanData",value:function(e,t,a,n,s,l,o,r,i,c){for(var u=[],d=[],m=0;m<r;m++)u.push(e[m]);for(var h=r;h<e.length;h++)this._isOutlier(h,e,t,n,s,l,o,r,i)&&d.push(h);for(var p=r;p<e.length;p++)d.includes(p)?u.push(this._modifyDropoutRow(p,e,a,o,r,c,d)):u.push(e[p]);return{cleanedCsvData:u,dropoutRowNums:d}}},{key:"_modifyDropoutRow",value:function(e,t,a,n,s,l,o){for(var r=[],i=0;i<t[e].length;i++)l.includes(i)?a?r.push(this._interpolatePoint(e,t,n,s,i,o)):r.push(null):r.push(t[e][i]);return r}},{key:"_isOutlier",value:function(e,t,a,n,s,l,o,r,i){var c,u=[],d=e-o,h=e+o,p=!1;d<r?d=r:h>t.length-1&&(h=t.length-1);for(var v=d;v<h;v++)v===e?c=t[v][i]:u.push(t[v][i]);var f=c-Object(m.a)(u);if(f<0&&s)p=a?f<-Object(m.b)(u)*n:f<-n;else if(f>0&&l){if(a)p=f>Object(m.b)(u)*n;else p=f>n}return p}},{key:"_interpolatePoint",value:function(e,t,a,n,s,l){var o=[],r=e-a,i=e+a;r<n&&(r=n),i>t.length-1&&(i=t.length-1);for(var c=r;c<i;c++)l.includes(c)||o.push(t[c][s]);return Object(m.a)(o)}},{key:"toGraphData",value:function(t,a,n,s,l,o){for(var r=t[0].length,i=[],c=[],u=["#b3e2cd","#fdcdac","#f4cae4","#fff2ae","#f1e2cc"],d=0,m=0;m<r;m++){for(var h=[],p=1,v=n;v<t.length;v++)isNaN(parseInt(t[v][m]))||(h.push({x:p,y:parseFloat(t[v][m])}),p>d&&(d=p)),p++;var f=void 0;l===m?(f={id:this._getColName(t,m,n),data:h},c.push("hsl(204, 100%, 85%")):(f={id:this._getColName(t,m,n),data:h},c.push(u[m%u.length])),i.push(f)}if(a.length>0){var g=e.getCleanedDataPoints(n,a,s,o,l);i.push({id:this._getColName(a,l,n)+" dropped",data:g}),c.push("hsl(204, 100%, 50%)")}var b=Math.round(d/10);return{data:i,axisBottomTickValues:[1,b,2*b,3*b,4*b,5*b,6*b,7*b,8*b,9*b,d],colors:c}}},{key:"getCleanedDataPoints",value:function(e,t,a,n,s){for(var l=[],o=1,r=e;r<t.length;r++)!a&&n.includes(r)?l.push({x:o,y:null}):isNaN(parseInt(t[r][s]))||l.push({x:o,y:t[r][s]}),o++;return l}},{key:"removeTrailingEmpties",value:function(e){var t=e.length,a=!1;function n(e){isNaN(parseInt(e))||(a=!0)}for(var s=0;s<t;s++)if(!a){var l=e.pop();l.forEach((function(e){return n(e)})),a&&(e.push(l),s+=e.length)}return e}},{key:"_getColName",value:function(e,t,a){for(var n="",s=0;s<a;s++)n=n+e[s][t]+" ";return n}}]),e}(),b=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).beginCallback=n.beginCallback.bind(Object(c.a)(n)),n.state={innerCSVData:[]},n}return Object(i.a)(a,[{key:"beginCallback",value:function(e){var t=g.removeTrailingEmpties(e);this.setState({innerCSVData:t}),this.props.callback(t)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{className:"pad-item-bottom"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement(v.a,{cssClass:"control",onFileLoaded:function(t){return e.beginCallback(t)}})),s.a.createElement("div",{className:"column"},s.a.createElement(f,{csvData:this.state.innerCSVData})))))}}]),a}(s.a.Component),E=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).beginCallback=n.beginCallback.bind(Object(c.a)(n)),n.state={SDmode:!0},n}return Object(i.a)(a,[{key:"beginCallback",value:function(e){"SDmode"===e.target.value?(this.setState({SDmode:!0}),this.props.callback(!0)):(this.setState({SDmode:!1}),this.props.callback(!1))}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"field pad-item-bottom"},s.a.createElement("label",null,"Filtering mode:"),s.a.createElement("div",{className:"control"},s.a.createElement("label",{className:"radio"},s.a.createElement("input",{type:"radio",value:"SDmode",style:{marginRight:"5px"},checked:this.state.SDmode,onChange:this.beginCallback}),"Standard Deviation"),s.a.createElement("label",{className:"radio"},s.a.createElement("input",{type:"radio",value:"absolute",style:{marginRight:"5px",marginLeft:"25px"},checked:!this.state.SDmode,onChange:this.beginCallback}),"\xa0Absolute"))))}}]),a}(s.a.Component),y=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"field"},s.a.createElement("label",null,"Cutoff ",this.props.mode?"deviation":"difference",":"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"number",onChange:this.props.callback,min:"0",step:this.props.mode?"0.1":"2",value:isNaN(this.props.default)?"":this.props.default,placeholder:"(A S.D. cutoff of 1.5 is recommended)"})))}}]),a}(s.a.Component),k=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"field"},s.a.createElement("label",null,"Compare ",isNaN(this.props.default)?"_":this.props.default," ahead & behind"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"number",onChange:this.props.callback,min:"1",step:"1",value:isNaN(this.props.default)?"":this.props.default,placeholder:"(Integers only)"})))}}]),a}(s.a.Component),w=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"tag is-white"},"Header rows"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input is-small",type:"number",onChange:this.props.callback,min:"0",step:"1",value:this.props.default,placeholder:"(Integers only)"})))}}]),a}(s.a.Component),C=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"tag is-white"},"Column to analyze"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input is-small",type:"number",onChange:this.props.callback,min:"1",max:this.props.maxColumns,step:"1",value:this.props.default+1,placeholder:"(Integers only)"})))}}]),a}(s.a.Component),N=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={filterLower:n.props.lowerDefault,filterHigher:n.props.higherDefault},n.beginHigherCallback=n.beginHigherCallback.bind(Object(c.a)(n)),n.beginLowerCallback=n.beginLowerCallback.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"beginHigherCallback",value:function(e){var t=!this.state.filterHigher;this.setState({filterHigher:t}),this.props.callback(t,"higher")}},{key:"beginLowerCallback",value:function(e){var t=!this.state.filterLower;this.setState({filterLower:t}),this.props.callback(t,"lower")}},{key:"render",value:function(){return s.a.createElement("div",{className:"field"},s.a.createElement("label",null,"Dropouts are:"),s.a.createElement("label",{style:{marginLeft:"10px"},className:"checkbox"},s.a.createElement("input",{checked:this.state.filterLower,onChange:this.beginLowerCallback,type:"checkbox"}),"\xa0 Lower"),s.a.createElement("label",{style:{marginLeft:"10px"},className:"checkbox"},s.a.createElement("input",{checked:this.state.filterHigher,onChange:this.beginHigherCallback,type:"checkbox"}),"\xa0 Higher"))}}]),a}(s.a.Component),O=a(137),j=a(192),D=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=g.toGraphData(this.props.csvData,this.props.cleanedCsvData,this.props.ignoredRows,this.props.interpolateMode,this.props.analysisColumn,this.props.dropoutRowNums);return s.a.createElement("div",{style:{height:"100%",overflow:"auto"}},s.a.createElement("div",{style:{height:"95%",width:this.props.graphWidth}},s.a.createElement(j.a,{data:e.data,enableGridX:!1,margin:{left:60,bottom:50,right:50,top:50},axisLeft:{orient:"left",legend:"Value",legendPosition:"middle",legendOffset:-40},colors:Object(O.a)(e.colors),axisBottom:{orient:"bottom",legend:"Reading #",legendPosition:"start",legendOffset:40,tickValues:Object(O.a)(e.axisBottomTickValues)},legends:[{anchor:"bottom-left",direction:"row",translateX:100,translateY:50,itemWidth:80*this.props.ignoredRows,itemHeight:20}]})))}}]),a}(s.a.Component),S=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return this.props.csvData.length>0&&this.props.isProcessing?s.a.createElement("div",{style:{height:"100%"}},s.a.createElement(D,{csvData:this.props.csvData,cleanedCsvData:this.props.cleanedCsvData,ignoredRows:this.props.ignoredRows,analysisColumn:this.props.analysisColumn,interpolateMode:this.props.InterpolateMode,dropoutRowNums:this.props.dropoutRowNums,graphWidth:this.props.graphWidth})):s.a.createElement("div",null)}}]),a}(s.a.Component),x=a(204),I=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){if(this.props.isProcessing){var e=this.props.dropoutRowNums.length;return s.a.createElement("div",{className:"box dropout-stats has-background-link has-text-white"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement("p",{className:"is-size-4"},this.props.csvData.length),s.a.createElement("p",{className:"is-size-7"},"Total Rows")),s.a.createElement("div",{className:"column"},s.a.createElement("p",{className:"is-size-4"},e),s.a.createElement("p",{className:"is-size-7"},this.props.InterpolateMode?"Values Interpolated":"Rows Dropped")),s.a.createElement("div",{className:"column"},s.a.createElement("button",{className:"button is-light is-pulled-right"},s.a.createElement(x.CSVLink,{data:this.props.cleanedCsvData},"Download")))))}return s.a.createElement("div",null)}}]),a}(s.a.Component),R=a(70),L=a.n(R),M=a(71),P=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return this.props.isProcessing?s.a.createElement("div",{className:"is-pulled-right"},s.a.createElement("button",{className:"button is-white",disabled:this.props.graphWidth<701,onClick:function(){return e.props.callback("-")}},s.a.createElement(L.a,{path:M.b,size:1})),"\xa0",s.a.createElement("button",{className:"button is-white",onClick:function(){return e.props.callback("+")}},s.a.createElement(L.a,{path:M.c,size:1})),"\xa0"):s.a.createElement("div",null)}}]),a}(n.Component),A=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return""===this.props.errorMsg?s.a.createElement("div",null):s.a.createElement("div",{className:"tag is-warning is-light"},s.a.createElement(L.a,{path:M.a,size:.5,color:"#947600"}),"\xa0",this.props.errorMsg)}}]),a}(n.Component),H=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).toggleClass=n.toggleClass.bind(Object(c.a)(n)),n.state={active:!1},n}return Object(i.a)(a,[{key:"toggleClass",value:function(){var e=this.state.active;this.setState({active:!e})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{style:{textAlign:"left"},className:this.state.active?"dropdown is-active":"dropdown"},s.a.createElement("div",{className:"dropdown-trigger"},s.a.createElement("button",{className:"button is-text","aria-haspopup":"true",onClick:this.toggleClass},s.a.createElement("span",null,"about & security"))),s.a.createElement("div",{className:"dropdown-menu",id:"dropdown-instructions",role:"menu"},s.a.createElement("div",{className:"dropdown-content"},s.a.createElement("div",{className:"dropdown-item"},s.a.createElement("p",null,s.a.createElement("button",{className:"delete",onClick:this.toggleClass,style:{float:"right"}},"Hide"),s.a.createElement("b",null,"About"),s.a.createElement("br",null),"This tool was created by Adam Mesa in Krassioukov Lab (Autonomic Research Unit, ICORD, University of British Columbia, BC, Canada). It was made to help with physiologic devices re-calibrating mid-reading that would report values far below expected before returning to the expected/consensus readings of our other devices.",s.a.createElement("br",null))),s.a.createElement("hr",{className:"dropdown-divider"}),s.a.createElement("div",{className:"dropdown-item"},s.a.createElement("p",null,s.a.createElement("b",null,"Security"),s.a.createElement("br",null),'This tool is offline-only: all processing happens on your computer (via JavaScript). Nothing is sent to any external servers - all your sensitive data stays on your PC. It is also possible to "install" this application via Google Chrome/FireFox, allowing you to have a start-menu icon if you prefer.')),s.a.createElement("hr",{className:"dropdown-divider"}),s.a.createElement("div",{className:"dropdown-item"},s.a.createElement("b",null,"Versions "),s.a.createElement("label",{className:"tag"},"Current: v1.2"),"\xa0",s.a.createElement("a",{className:"tag is-link",href:"https://github.com/adammesa/dropout-remover",target:"_blank"},"Source Code \u2192"),s.a.createElement("div",null,s.a.createElement("ul",null,s.a.createElement("li",null,"v1.2 - June 2020; Added interpolation/removal row chooser, error message improvements"),s.a.createElement("li",null,"v1.1 - June 2020; Added Interpolation, bugfixes, & better error catches"),s.a.createElement("li",null,"v1.0.1 - June 2020; Bugfixes, minor usability improvements"),s.a.createElement("li",null,"v1.0 - March 2020; Initial Release"))))))))}}]),a}(s.a.Component),W=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).beginCallback=n.beginCallback.bind(Object(c.a)(n)),n.state={InterpolateMode:!0},n}return Object(i.a)(a,[{key:"beginCallback",value:function(e){"Interpolate"===e.target.value?(this.setState({InterpolateMode:!0}),this.props.callback(!0)):(this.setState({InterpolateMode:!1}),this.props.callback(!1))}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"field pad-item-bottom"},s.a.createElement("label",null,"Action to take with dropouts:"),s.a.createElement("div",{className:"control"},s.a.createElement("label",{className:"radio"},s.a.createElement("input",{type:"radio",value:"Interpolate",style:{marginRight:"5px"},checked:this.state.InterpolateMode,onChange:this.beginCallback}),"Interpolate values"),s.a.createElement("label",{className:"radio"},s.a.createElement("input",{type:"radio",value:"blank-row",style:{marginRight:"5px",marginLeft:"25px"},checked:!this.state.InterpolateMode,onChange:this.beginCallback}),"\xa0Erase values"))))}}]),a}(s.a.Component),F=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(r.a)(this,a),n=t.call(this,e);var s=e.default,l=[];return s.forEach((function(e){l.push(e+1)})),n.state={inputVal:l.join(", "),isSuccess:!0},n.processInput=n.processInput.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"processInput",value:function(e){for(var t=e.target.value.replace(/\s/g,"").split(","),a=[],n=!0,s=0;s<t.length;s++){var l=parseInt(t[s]);if(isNaN(l))""===l||(n=!1);else{var o=l-1;o>=0&&o<this.props.maxColumns?a.push(o):n=!1}}n?(this.props.callback(a),this.setState({inputVal:e.target.value,isSuccess:!0})):(this.props.callback([]),this.setState({inputVal:e.target.value,isSuccess:!1}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"tag is-white"},"Columns to modify (comma separated)"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:this.state.isSuccess?"input is-small":"input is-small is-danger",type:"string",onChange:this.processInput,value:this.state.inputVal,placeholder:"(Comma separated (e.g. '1, 3, 4, 5'))"})))}}]),a}(s.a.Component),z=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={csvData:[],cleanedCsvData:[],SDmode:!0,InterpolateMode:!0,filterCutoff:1.5,filterLower:!0,filterHigher:!1,lookDistance:5,ignoredRows:1,analysisColumn:0,dropoutColumns:[0],isProcessing:!1,dropoutRowNums:[],graphWidth:700,errorMsg:""},n.toggleProcessingData=n.toggleProcessingData.bind(Object(c.a)(n)),n.checkForErrors=n.checkForErrors.bind(Object(c.a)(n)),n.changeGraphSize=n.changeGraphSize.bind(Object(c.a)(n)),n.loadNegativeOnly=n.loadNegativeOnly.bind(Object(c.a)(n)),n.loadNewData=n.loadNewData.bind(Object(c.a)(n)),n.loadSDmode=n.loadSDmode.bind(Object(c.a)(n)),n.loadInterpolateMode=n.loadInterpolateMode.bind(Object(c.a)(n)),n.loadFilterCutoff=n.loadFilterCutoff.bind(Object(c.a)(n)),n.loadLookDistance=n.loadLookDistance.bind(Object(c.a)(n)),n.loadIgnoredRows=n.loadIgnoredRows.bind(Object(c.a)(n)),n.loadAnalysisColumn=n.loadAnalysisColumn.bind(Object(c.a)(n)),n.loadDropoutColumns=n.loadDropoutColumns.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"toggleProcessingData",value:function(){this.setState({isProcessing:!this.state.isProcessing})}},{key:"componentDidUpdate",value:function(e,t,a){var n=this.checkForErrors();if(""===n&&""!==this.state.errorMsg&&this.setState({errorMsg:""}),this.state.isProcessing&&(t.csvData!==this.state.csvData||t.isProcessing!==this.state.isProcessing||t.SDmode!==this.state.SDmode||t.InterpolateMode!==this.state.InterpolateMode||t.lookDistance!==this.state.lookDistance||t.analysisColumn!==this.state.analysisColumn||t.dropoutColumns!==this.state.dropoutColumns||t.ignoredRows!==this.state.ignoredRows||t.filterCutoff!==this.state.filterCutoff||t.filterLower!==this.state.filterLower||t.filterHigher!==this.state.filterHigher))if(""===n){var s=g.cleanData(this.state.csvData,this.state.SDmode,this.state.InterpolateMode,this.state.filterCutoff,this.state.filterLower,this.state.filterHigher,parseInt(this.state.lookDistance),this.state.ignoredRows,this.state.analysisColumn,this.state.dropoutColumns);this.setState({cleanedCsvData:s.cleanedCsvData,dropoutRowNums:s.dropoutRowNums})}else this.setState({errorMsg:n,isProcessing:!1})}},{key:"checkForErrors",value:function(){var e=[];if(isNaN(this.state.filterCutoff)&&e.push("the cutoff"),isNaN(this.state.lookDistance)&&e.push("the comparison distance"),0===this.state.dropoutColumns.length&&e.push("valid modify columns (usually same as analysis column)"),void 0===this.state.csvData[0])return e.push("a csv file to analyse"),e="Please enter "+e.join(", ")+".";if((this.state.analysisColumn<0||this.state.analysisColumn>this.state.csvData[0].length)&&e.push("a valid column number to analyze"),""===this.state.ignoredRows&&e.push("header rows"),0!==e.length&&(e=["Please enter "+e.join(", ")+"."]),0!==this.state.csvData.length)try{for(var t=[],a=this.state.ignoredRows;a<this.state.csvData.length;a++)t.push(this.state.csvData[a][this.state.analysisColumn]);Object(m.a)(t)}catch(n){e.push("Non-number values detected (did you forget to set header rows).")}return 0===e.length?"":e.join(" ")}},{key:"changeGraphSize",value:function(e){var t;t="+"===e?this.state.graphWidth+200:this.state.graphWidth-200,this.setState({graphWidth:t})}},{key:"loadNegativeOnly",value:function(e,t){"lower"===t?this.setState({filterLower:e}):this.setState({filterHigher:e})}},{key:"loadAnalysisColumn",value:function(e){var t=parseInt(e.target.value);isNaN(t)?this.setState({analysisColumn:0}):this.setState({analysisColumn:t-1})}},{key:"loadDropoutColumns",value:function(e){this.setState({dropoutColumns:e})}},{key:"loadIgnoredRows",value:function(e){this.setState({ignoredRows:e.target.value})}},{key:"loadNewData",value:function(e){this.setState({csvData:e})}},{key:"loadSDmode",value:function(e){this.setState({SDmode:e})}},{key:"loadInterpolateMode",value:function(e){this.setState({InterpolateMode:e})}},{key:"loadFilterCutoff",value:function(e){this.setState({filterCutoff:parseFloat(e.target.value)})}},{key:"loadLookDistance",value:function(e){this.setState({lookDistance:parseInt(e.target.value)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("div",null,s.a.createElement(H,null))),s.a.createElement("div",{className:"app-body",style:{paddingLeft:"25px"}},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-two-fifths max-450-px"},s.a.createElement("div",{className:this.state.isProcessing?"box dropout-controls isProcessing is-clearfix":"box dropout-controls is-clearfix"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement("h2",{style:{marginTop:"5px"},className:"title is-4"},"Dropout remover")),s.a.createElement("div",{className:"column is-two-fifths",style:{textAlign:"right"}},s.a.createElement(h,null))),s.a.createElement("p",null,"Load .csv file:"),s.a.createElement(b,{callback:this.loadNewData}),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement(w,{callback:this.loadIgnoredRows,default:this.state.ignoredRows})),s.a.createElement("div",{className:"column"},s.a.createElement(C,{callback:this.loadAnalysisColumn,maxColumns:0===this.state.csvData.length?"1":this.state.csvData[0].length,default:this.state.analysisColumn}),s.a.createElement(F,{default:this.state.dropoutColumns,callback:this.loadDropoutColumns,maxColumns:0===this.state.csvData.length?"1":this.state.csvData[0].length}))),s.a.createElement("label",{className:"label"},"Filter Settings"),s.a.createElement(E,{callback:this.loadSDmode}),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-two-fifths"},s.a.createElement(y,{callback:this.loadFilterCutoff,default:this.state.filterCutoff,mode:this.state.SDmode})),s.a.createElement("div",{className:"column"},s.a.createElement(k,{callback:this.loadLookDistance,default:this.state.lookDistance}))),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement(N,{callback:this.loadNegativeOnly,lowerDefault:this.state.filterLower,higherDefault:this.state.filterHigher}))),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement(W,{callback:this.loadInterpolateMode}))),s.a.createElement(A,{errorMsg:this.state.errorMsg}),s.a.createElement("button",{className:"button is-link is-light is-pulled-right",disabled:0===this.state.csvData.length||""!==this.state.errorMsg,onClick:this.toggleProcessingData},this.state.isProcessing?"Auto-processing":"Process"),s.a.createElement(P,{graphWidth:this.state.graphWidth,callback:this.changeGraphSize,isProcessing:this.state.isProcessing})),s.a.createElement(I,this.state)),s.a.createElement("div",{className:"column max-without-450-px"},s.a.createElement(S,this.state)))))}}]),a}(s.a.Component),V=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function T(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(s.a.createElement(z,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/dropout-remover",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/dropout-remover","/service-worker.js");V?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?(console.log("No service worker found."),navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))}))):T(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):T(t,e)}))}}()}},[[241,1,2]]]);
//# sourceMappingURL=main.21230dc5.chunk.js.map